{"ast":null,"code":"import _regeneratorRuntime from \"/Users/darrendeabreu/Desktop/my-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/darrendeabreu/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/darrendeabreu/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/darrendeabreu/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/darrendeabreu/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/darrendeabreu/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/darrendeabreu/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/darrendeabreu/Desktop/my-app/src/components/Statements.js\";\nimport React, { Component } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport axios from 'axios';\nimport jsSHA from 'jssha';\n/**\n*  Fetches API\n*  Initalise the state\n*  Populates the table\n**/\n\nvar Statements =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Statements, _Component);\n\n  function Statements() {\n    var _this;\n\n    _classCallCheck(this, Statements);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Statements).call(this));\n    _this.state = {\n      account: {},\n      transactions: [],\n      clients: [],\n      accounts: []\n    };\n    return _this;\n  }\n\n  _createClass(Statements, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var user = this.props.username; //'blackfish787';\n\n      var password = this.props.password; //'lestat';\n\n      var hmac = new jsSHA('SHA-256', 'TEXT');\n      hmac.setHMACKey(password, 'TEXT');\n      hmac.update(user);\n      hmac.update(Date.now().toString(36).substring(0, 4));\n      var token = \"\".concat(hmac.getHMAC('HEX'), \"%\").concat(user);\n      var api = axios.create({\n        baseURL: 'http://45.77.58.134:8080',\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      });\n\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var res, accounts, id, transactions, x;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(id);\n                _context.next = 3;\n                return api.get('/clients');\n\n              case 3:\n                res = _context.sent;\n\n                _this2.setState({\n                  clients: res.data\n                });\n\n                _context.next = 7;\n                return api.get(\"/accounts/\".concat(res.data[0]._id));\n\n              case 7:\n                accounts = _context.sent;\n\n                _this2.setState({\n                  accounts: accounts.data\n                });\n\n                id = _this2.state.clients[0][\"_id\"]; //const id = this.props.match.params.accounts;\n\n                _context.next = 12;\n                return api.get(\"/transactions/\".concat(id, \"/.*\"));\n\n              case 12:\n                transactions = _context.sent;\n                x = 0;\n\n              case 14:\n                if (!(x < accounts.data.length)) {\n                  _context.next = 21;\n                  break;\n                }\n\n                if (!(accounts.data[x]._id === id)) {\n                  _context.next = 18;\n                  break;\n                }\n\n                _this2.setState({\n                  account: accounts.data[x]\n                });\n\n                return _context.abrupt(\"break\", 21);\n\n              case 18:\n                x++;\n                _context.next = 14;\n                break;\n\n              case 21:\n                _this2.setState({\n                  transactions: transactions.data\n                }); // console.log(accounts);\n\n\n              case 22:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }))();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"navbar2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/MyAccounts\",\n        className: \"navButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, \" My Accounts \"), React.createElement(NavLink, {\n        to: \"/newAcc\",\n        className: \"navButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \" New Accounts \"), React.createElement(NavLink, {\n        to: \"/myCards\",\n        className: \"navButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, \" My Cards \"), React.createElement(NavLink, {\n        to: \"/accInfo\",\n        className: \"navButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, \" Account Information \")), React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"payments\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \"Statements\"), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, this.state.account.description), React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Date\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"Reference\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"Amount\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"Balance\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      })), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, this.state.transactions.map(function (x) {\n        return React.createElement(\"tr\", {\n          key: x._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, Intl.DateTimeFormat('en-GB', {\n          year: 'numeric',\n          month: 'long',\n          day: '2-digit',\n          hour: '2-digit',\n          minute: '2-digit',\n          second: '2-digit'\n        }).format(x.time)), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, x.ref), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, Intl.NumberFormat('en-GB', {\n          style: 'currency',\n          currency: 'ZAR'\n        }).format(x.amount)), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, Intl.NumberFormat('en-GB', {\n          style: 'currency',\n          currency: 'ZAR'\n        }).format(x.balance)));\n      }))), React.createElement(NavLink, {\n        to: \"/printStatements\",\n        className: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \" Print \"), React.createElement(NavLink, {\n        to: \"/downloadStatements\",\n        className: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \" Download \"))));\n    }\n  }]);\n\n  return Statements;\n}(Component);\n\nexport default Statements;","map":{"version":3,"sources":["/Users/darrendeabreu/Desktop/my-app/src/components/Statements.js"],"names":["React","Component","NavLink","axios","jsSHA","Statements","state","account","transactions","clients","accounts","user","props","username","password","hmac","setHMACKey","update","Date","now","toString","substring","token","getHMAC","api","create","baseURL","headers","console","log","id","get","res","setState","data","_id","x","length","description","map","Intl","DateTimeFormat","year","month","day","hour","minute","second","format","time","ref","NumberFormat","style","currency","amount","balance"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport axios from 'axios';\nimport jsSHA from 'jssha';\n\n\n/**\n*  Fetches API\n*  Initalise the state\n*  Populates the table\n**/\n\nclass Statements extends Component {\n  constructor() {\n    super()\n    this.state = { account: {}, transactions: [], clients: [], accounts: [], };\n  }\n\n  componentDidMount() {\n        const user = this.props.username//'blackfish787';\n        const password = this.props.password//'lestat';\n        const hmac = new jsSHA('SHA-256', 'TEXT');\n        hmac.setHMACKey(password, 'TEXT');\n        hmac.update(user);\n        hmac.update(Date.now().toString(36).substring(0, 4));\n        const token = `${hmac.getHMAC('HEX')}%${user}`;\n        const api = axios.create({\n        baseURL: 'http://45.77.58.134:8080',\n        headers: { 'Authorization': 'Bearer ' + token }\n        });\n\n (async () => {\n\n   console.log(id);\n           const res = await api.get('/clients');\n           this.setState({clients:res.data})\n           const accounts = await api.get(`/accounts/${res.data[0]._id}`)\n           this.setState({accounts:accounts.data})\n           const id = this.state.clients[0][\"_id\"]\n           //const id = this.props.match.params.accounts;\n           const transactions = await api.get(`/transactions/${id}/.*`)\n           for (let x = 0; x < accounts.data.length; x++) {\n             if (accounts.data[x]._id === id) {\n               this.setState({account: accounts.data[x]});\n               break;\n             }\n           }\n           this.setState({transactions: transactions.data});\n           // console.log(accounts);\n         })();\n       };\n\n\n  render () {\n         return (\n         <div>\n         <div className = \"navbar2\">\n           <NavLink to=\"/MyAccounts\" className = \"navButton\"> My Accounts </NavLink>\n           <NavLink to=\"/newAcc\" className = \"navButton\"> New Accounts </NavLink>\n           <NavLink to=\"/myCards\" className = \"navButton\"> My Cards </NavLink>\n           <NavLink to=\"/accInfo\" className = \"navButton\"> Account Information </NavLink>\n         </div>\n\n         <div className = \"content\">\n          <div id=\"payments\">\n            <h1>Statements</h1>\n            <h2>{this.state.account.description}</h2>\n            <table>\n            <thead>\n            <th>Date</th>\n            <th>Reference</th>\n            <th>Amount</th>\n            <th>Balance</th>\n            <th></th>\n            </thead>\n            <tbody>\n            {this.state.transactions.map(x =>\n            <tr key = {x._id}>\n            <td>{Intl.DateTimeFormat('en-GB', {\n              year: 'numeric',\n              month: 'long',\n              day: '2-digit',\n              hour: '2-digit',\n              minute: '2-digit',\n              second: '2-digit'\n            }).format(x.time)}</td>\n            <td>{x.ref}</td>\n            <td>{Intl.NumberFormat('en-GB', {\n              style: 'currency',\n              currency: 'ZAR',\n            }).format(x.amount)}</td>\n            <td>{Intl.NumberFormat('en-GB', {\n              style: 'currency',\n              currency: 'ZAR',\n            }).format(x.balance)}</td>\n          </tr>\n        )}\n        </tbody>\n        </table>\n        <NavLink to =\"/printStatements\" className = \"button\"> Print </NavLink>\n        <NavLink to =\"/downloadStatements\" className = \"button\"> Download </NavLink>\n        </div>\n        </div>\n        </div>\n      )\n      }\n    }\n\nexport default Statements\n"]},"metadata":{},"sourceType":"module"}